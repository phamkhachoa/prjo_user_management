
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="../css/style.css" rel="stylesheet" type="text/css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript" src="../js/user.js"></script>
    <title>Insert title here</title>
</head>
<body>
    <!-- Begin vung header -->
    <div>
        <div>
            <table>
                <tr>
                    <td width="80%">
                        <img src="../images/logo-manager-user.gif" alt="Luvina" />
                    </td>
                    <td></td>
                    <td align="left">
                        <a href="/logout">ログアウト</a> &nbsp; <a href="./listUser">トップ</a>
                    </td>
                    <td></td>
                </tr>
            </table>
        </div>
    </div>
    <!-- End vung header -->

    <div class="listUser">
        <!-- Begin vung dieu kien tim kiem -->
        <form action="ADM002" method="get" name="mainform">
            <table class="tbl_input" border="0" width="90%" cellpadding="0" cellspacing="0">
                <tr>
                    <td>
                        &nbsp;
                    </td>
                </tr>
                <tr>
                    <td>
                        会員名称で会員を検索します。検索条件無しの場合は全て表示されます。
                    </td>
                </tr>
                <tr>
                    <td width="100%">
                        <table class="tbl_input" cellpadding="4" cellspacing="0">
                            <tr>
                                <td class="lbl_left">氏名:</td>
                                <td align="left">
                                    <input class="txBox" type="text" name="full_name"
                                           value="@(@Session["full_name"] == "" ? "" : @Session["full_name"] )" size="20" onfocus="this.style.borderColor='#0066ff';"
                                           onblur="this.style.borderColor='#aaaaaa';" />
                                </td>
                                <td></td>
                            </tr>
                            <tr>
                                <td class="lbl_left">グループ:</td>
                                <td align="left" width="80px">
                                    <select name="group_id">
                                        <option value="0">全て</option>
                                        @foreach (var mstGroup in ViewBag.listMstGroup)
                                        {
                                            <option value="@mstGroup.Group_id" @(mstGroup.Group_id == (Int32)@Session["group_id"] ? "selected" : "")>
                                                @mstGroup.Group_name
                                            </option>
                                        }
                                    </select>
                                </td>
                                <td align="left">
                                    <input class="btn" type="submit" value="検索" />
                                    <input class="btn" type="button" value="新規追加" id="createUser" />
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </form>
        <!-- End vung dieu kien tim kiem -->
        <!-- Begin vung hien thi danh sach user -->
        <table class="tbl_list" border="1" cellpadding="4" cellspacing="0" width="80%">

            <tr class="tr2">
                <th align="center" width="20px">
                    ID
                </th>
                <th align="left">
                    氏名


                    @if (@Session["sortByFullName"].ToString() == "asc")
                    {
                        @:<a href="ADM002?sortType=full_name&sortByFullName=desc">▲▽</a>
                    }
                    else
                    {
                        @:<a href="ADM002?sortType=full_name&sortByFullName=asc">△▼</a>
                    }

                </th>
                <th align="left">
                    生年月日
                </th>
                <th align="left">
                    グループ
                </th>
                <th align="left">
                    メールアドレス
                </th>
                <th align="left" width="70px">
                    電話番号
                </th>
                <th align="left">
                    日本語能力
                    @if (@Session["sortByCodeLevel"].ToString() == "asc")
                    {
                        @:<a href="ADM002?sortType=code_level&sortByCodeLevel=desc">▲▽</a>
                    }
                    else
                    {
                        @:<a href="ADM002?sortType=code_level&sortByCodeLevel=asc">△▼</a>
                    }
                </th>
                <th align="left">
                    失効日
                    @if (@Session["sortByEndDate"].ToString() == "asc")
                    {
                        @:<a href="ADM002?sortType=end_date&sortByEndDate=desc">▲▽</a>
                    }
                    else
                    {
                        @:<a href="ADM002?sortType=end_date&sortByEndDate=asc">△▼</a>
                    }
                </th>
                <th align="left">
                    点数
                </th>
            </tr>
            @foreach (var user in ViewBag.listUser)
            {
                <tr>
                    <td>
                        <a href="#">@user.Id</a>
                    </td>
                    <td>
                        @user.Name
                    </td>
                    <td>
                        @user.Birthday.ToString("MM/dd/yyyy")
                    </td>
                    <td>
                        @user.Email
                    </td>
                    <td>
                        @user.Group_name
                    </td>
                    <td>
                        @user.Tel
                    </td>
                    <td>
                        @user.Name_level
                    </td>
                    <td>
                        @if (@user.End_date != null)
                        {
                            @user.End_date.ToString("MM/dd/yyyy")
                        }

                    </td>
                    <td>
                        @if (user.Total != null)
                        {
                            @user.Total
                        }
                    </td>

                </tr>
            }
        </table>
        <!-- End vung hien thi danh sach user -->
        <!-- Begin vung paging -->
        <table>
            @if (ViewBag.totalUsers > 5)
            {
                <tr>
                    <td class="lbl_paging">
                        @if (ViewBag.listPages[0] - 1 > 0)
                        {
                            var page = @Int32.Parse(ViewBag.listPages[0].ToString()) - 3;
                            <a href="ADM002?page=@page">&lt;&lt;</a>//&nbsp;
                        }
                        @foreach (var el in ViewBag.listPages)
                        {
                            if (el == Int32.Parse(Session["currentPage"].ToString()))
                            {
                                <a>@el | </a>
                            }
                            else if (el == @Int32.Parse(ViewBag.listPages[Enumerable.Count(ViewBag.listPages) - 1].ToString()))
                            {
                                <a href="ADM002?page=@el">@el </a>
                            }
                            else
                            {
                                <a href="ADM002?page=@el">@el | </a>
                            }
                        }
                    </td>

                    <td>
                        @if (ViewBag.totalPages - ViewBag.listPages[Enumerable.Count(ViewBag.listPages) - 1] > 0)
                        {

                            var page = @Int32.Parse(ViewBag.listPages[Enumerable.Count(ViewBag.listPages) - 1].ToString()) + 1;

                            <a href="ADM002?page=@page">&gt;&gt;</a>//&nbsp;
                        }
                    </td>
                </tr>
            }

        </table>
        <!-- End vung paging -->
    </div>

    <!-- Begin vung footer -->
    <div class="lbl_footer">
        <br /><br /><br /><br />
        Copyright ©　2010　ルビナソフトウエア株式会社. All rights reserved.
    </div>
    <!-- End vung footer -->

    <div class="nen_mo"></div>

    <div class="dialog-form" title="Create new user">
        @Html.Partial("ADM002Add")
    </div>
</body>

</html>
